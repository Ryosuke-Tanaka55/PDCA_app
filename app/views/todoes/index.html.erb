<% provide(:title, current_user.name) %>
<h1><%= @doing.doing %><br>ToDo一覧</h1>

<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <%= link_to "Do一覧へ戻る", user_goal_subgoal_doings_path(user_id: current_user.id, goal_id: @subgoal.goal_id, subgoal_id: @doing.subgoal_id), class: "btn btn-lg btn-default pull-right" %>
    <%= link_to "ToDo新規作成", new_user_goal_subgoal_doing_todo_path(user_id: current_user.id, goal_id: @subgoal.goal_id, subgoal_id: @doing.subgoal_id), class: "btn btn-lg btn-primary pull-right" %>
    <table class="table table-hover" id="table-subgoals">
      <thead>
        <tr>
          <th><%= Todo.human_attribute_name :todo %></th>
          <th><%= Todo.human_attribute_name :start_day %></th>
          <th><%= Todo.human_attribute_name :finish_day %></th>
        </tr>
      </thead>
    
      <% if @todoes.present? %>
        <% @todoes.each do |todo| %>
          <tr>
            <td><%= link_to "#{todo.todo}", user_goal_subgoal_doing_path(user_id: current_user.id, goal_id: @goal.id, subgoal_id: @subgoal.id, doing_id: @doing.id, id: todo.id) %></td>
            <td><%= l(todo.start_day, format: :long) %></td>
            <td><%= l(todo.finish_day, format: :long) %></td>
            <td align="center">
              <%= link_to "詳細", user_goal_subgoal_doing_todo_path(user_id: current_user.id, goal_id: @goal.id, subgoal_id: @subgoal.id, doing_id: @doing.id, id: todo.id), class: "btn btn-primary" %>
              <%= link_to "検証", "#", class: "btn btn-warning" %>
              <%= link_to "編集", edit_user_goal_subgoal_doing_todo_path(user_id: current_user.id, goal_id: @goal.id, subgoal_id: @subgoal.id, doing_id: @doing.id, id: todo.id), class: "btn btn-success" %>
              <%= link_to "削除", user_goal_subgoal_doing_todo_path(user_id: current_user.id, goal_id: @goal.id, subgoal_id: @subgoal.id, doing_id: @doing.id, id: todo.id), method: :delete,
                  data: { confirm: "「#{todo.todo}」を削除してよろしいですか？" }, class: "btn btn-danger" %>
            </td>
          </tr>
        <% end %>
      <% end %>
    </table>
  </div>
</div>